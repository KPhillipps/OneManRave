; FFT Teensy firmware - auto-detects LEFT/RIGHT channel by serial number
; Serial 19236400 = LEFT (ch0), Serial 16102920 = RIGHT (ch1)
[env:teensy_fft]
platform = teensy
board = teensy40
framework = arduino

build_flags =
    -D USB_SERIAL
    -D LAYOUT_US_ENGLISH
    -O2
    -std=gnu++17

monitor_speed = 115200
monitor_filters = direct
targets = upload
upload_protocol = custom
; Upload to whichever FFT Teensys are connected (LEFT=19236400, RIGHT=16102920)
upload_command = (~/bin/tycmd upload -B 19236400 $SOURCE 2>/dev/null || true) && (~/bin/tycmd upload -B 16102920 $SOURCE 2>/dev/null || true)

lib_deps =
    fastled/FastLED@^3.7.8
    https://github.com/PaulStoffregen/Audio.git
